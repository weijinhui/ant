<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=0">
    <title>cool</title>
    <link rel="stylesheet" href="https://cdn.bootcss.com/weui/1.1.3/style/weui.min.css">
    <link rel="stylesheet" href="https://cdn.bootcss.com/jquery-weui/1.2.1/css/jquery-weui.min.css">
    <link rel="stylesheet" href="../staticResources/css/global.css">
</head>
<html >


<body >
<div class="weui-toptips weui-toptips_warn js_tooltips">错误提示</div>
<div class="container" id="container">
    <div class="page home js_show">
        <div class="page__hd">
            <!--<header>添加电影</header>-->
        </div>
        <div class="page__bd ">
            <div class="weui-cells weui-cells_form">
                <div class="weui-cell">
                    <div class="weui-cell__hd"><label class="weui-label">电影名</label></div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" type="text" id="movieName" placeholder="请输入电影名">
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__hd">
                        <label class="weui-label">类型</label>
                    </div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" type="tel" id="movieType" placeholder="请选择类型">
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__hd"><label for="" class="weui-label">年份</label></div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" id="movieYear" type="text" placeholder="请选择年份">
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__hd"><label for="" class="weui-label">地区</label></div>
                    <div class="weui-cell__bd">
                        <input class="weui-input" id="movieArea" type="text"  placeholder="请选择地区">
                    </div>
                </div>
                <div class="weui-cell">
                    <div class="weui-cell__hd"><label for="" class="weui-label">海报</label></div>
                    <div class=" weui-uploader__input-box">
                        <input id="movieImg" class="weui-uploader__input" type="file" accept="image/*" multiple="">
                    </div>
                </div>
                <a href="javascript:;" class="weui-btn weui-btn_primary" style="margin: 10px">按钮</a>
            </div>
        </div>
        <div class="page__ft j_bottom">

        </div>
    </div>
</div>

    <script src="https://cdn.bootcss.com/jquery/1.11.0/jquery.min.js"></script>
    <script src="https://cdn.bootcss.com/jquery-weui/1.2.1/js/jquery-weui.min.js"></script>
<script>
    $("#movieArea").select({
        title: "选择地区",
        items: ["华语", "欧美", "日韩", "印泰", "其他"]
    });
    $("#movieYear").select({
        title: "选择年份",
        items: ["2018", "2017", "2011-2016", "2000-2010", "1900-2000"]
    });
    $("#movieType").select({
        title: "选择类型",
        items: ["科幻", "恐怖", "爱情", "武侠", "喜剧"]
    });

    $(document).ready(function () {
        FastClick.attach(document.body);
        $("#submitAgency").click(function () {
            var movieName = $("#movieName").val();
            var movieType = $("#movieType").val();
            var movieYear = $("#movieYear").val();
            var movieArea = $("#movieArea").val();

            var formData = new FormData();
            formData.append("cPlateNo", cPlateNo);
            formData.append("cAddress", cAddress);
            formData.append("cPhone", cPhone);
            formData.append("cCityCode", cityCode);
            formData.append("insuranceFile", insuranceFile);

            formData.append("cOnTm", cOnTm);

            if (cPhone == "") {
                $.alert("请输入手机号", function () {
                    $("input[name='cPhone']").focus();
                });
                return;
            }
            if (cAddress == "") {
                $.alert("请输入取车地址", function () {
                    $("input[name='cPhone']").focus();
                });
                return;
            }
            if (!(/^1[3|4|5|6|7|8|9][0-9]\d{4,8}$/.test(cPhone))) {
                $.alert("手机号格式错误。", function () {
                    $("input[name='cPhone']").focus();
                });
                return false;
            }

            if (cOnTm == "") {
                $.alert("请选择上门取车时间", function () {

                });
                return;
            } else {

            }
            if (drivingLicenseImg == "") {
                $.alert("请上传行驶证", function () {
                });
                return;
            }
            if (insuranceImg == "") {
                $.alert("请上传交强险副本", function () {
                });
                return;
            }

            if (!$("#checkbox").is(":checked")) {
                $.alert("请勾选代办协议", function () {

                });
                return;
            }

            $.showLoading("订单生成中");
            $.ajax({
                url: "addWechatAgencyVehOrder",
                type: "post",
                data: formData,
                dataType: "json",
                processData: false,  // 告诉jQuery不要去处理发送的数据
                contentType: false,// 告诉jQuery不要去设置Content-Type请求头
                error: function (XMLHttpRequest, textStatus, errorThrown) {
                    $.hideLoading();
                    alert(jsonData.code);
                    $.toptip("失败:readyState" + XMLHttpRequest.readyState + ",status" + XMLHttpRequest.status + ",msg:" + textStatus);
                },
                success: function (jsonData) {
                    $.hideLoading();
                    if (jsonData.code == "200") {
                        window.location = "${request.contextPath}/wechat/client/toWechatAgencyVehOrderWaitingPage?cOrderNo="+jsonData.data.cOrderNo;
                    } else {
                        $.toptip(jsonData.message);
                    }
                }
            });

        });




    });
</script>
</body>
</html>